---
phase: 16.1-darkroom-bottom-sheet-ui-overhaul
plan: 01
type: execute
---

<objective>
Redesign the darkroom bottom sheet UI for a premium, dark-themed experience with neon purple hold-to-reveal interaction.

Purpose: Transform the current white/blue bottom sheet into a polished dark-themed interface with visual and haptic feedback that feels premium and satisfying.
Output: Redesigned DarkroomBottomSheet component with dark theme, status indicators, card stack display, and enhanced neon purple hold-to-reveal interaction.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16.1-darkroom-bottom-sheet-ui-overhaul/16.1-CONTEXT.md

**Key files:**
@src/components/DarkroomBottomSheet.js - Current implementation to redesign
@src/screens/CameraScreen.js - Contains DarkroomCardButton component with card stack/fan animation to reference

**Tech stack available:**
- React Native Animated API for animations
- expo-haptics for haptic feedback
- react-native-svg for icons (if needed)
- LinearGradient from expo-linear-gradient (may need to add)

**From 16.1-CONTEXT.md - Vision:**
- Dark theme consistent with app
- Header: "Darkroom" title + status dot (green=revealed, red=developing) + status text
- Top right: Fanned card stack (1-4 cards based on count) - mirror camera footer design
- Bottom: Large hold-to-reveal rectangle with neon purple gradient
- Hold animation: fill left-to-right with darker-left/lighter-right gradient
- Spinner icon that spins 2x faster during hold
- Progress fills 1.25x faster (2s â†’ 1.6s)
- Haptic crescendo: starts light, intensifies with progress

**Prior phase patterns:**
- Phase 15.2 established card stack with fan animation in DarkroomCardButton
- Phase 16 established two-stage haptic pattern (lightImpact/mediumImpact)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Dark theme + header/card stack layout</name>
  <files>src/components/DarkroomBottomSheet.js</files>
  <action>
Redesign DarkroomBottomSheet layout and styling:

1. **Dark theme colors:**
   - Sheet background: #1A1A1A (dark gray)
   - Text colors: #FFFFFF for primary, #888888 for secondary
   - Remove all #FFFFFF backgrounds and #007AFF blue

2. **Header area (top left):**
   - "Darkroom" title in bold white
   - Status indicator dot to the right of title:
     - Green (#22C55E) if revealedCount > 0
     - Red (#EF4444) if only developing
   - Status text underneath:
     - "Photos still developing" (if revealedCount === 0)
     - "(X) ready to reveal" (if revealedCount > 0)

3. **Card stack (top right):**
   - Extract reusable card stack component OR duplicate the DarkroomCardButton render logic
   - Position in top right of sheet
   - Use same visual design: CARD_WIDTH=63, CARD_HEIGHT=84, rounded corners
   - Show 1-4 cards fanned based on totalCount
   - Display count on front card
   - Static (no capture animation needed in bottom sheet)
   - Card color: #2A2A2A (dark gray) with #FFFFFF text

4. **Layout structure:**
   - Flex row for header (title/status left, cards right)
   - Remove the large centered count display
   - Keep sheet height similar but reorganized
  </action>
  <verify>App runs without errors, bottom sheet opens with dark theme, header shows title + status dot + text on left, card stack on right</verify>
  <done>Dark theme applied, header layout with status indicator, card stack positioned top right, no white background visible</done>
</task>

<task type="auto">
  <name>Task 2: Neon purple gradient hold-to-reveal with spinner and crescendo haptics</name>
  <files>src/components/DarkroomBottomSheet.js, package.json (if expo-linear-gradient needed)</files>
  <action>
Implement the enhanced hold-to-reveal interaction:

1. **Install expo-linear-gradient if not present:**
   ```bash
   npx expo install expo-linear-gradient
   ```

2. **Hold button container:**
   - Large rectangle spanning bottom of sheet
   - Rounded corners (borderRadius: 16)
   - Neon purple gradient background using LinearGradient:
     - Start color: #4C1D95 (dark purple on edges)
     - End color: #7C3AED (lighter purple in middle)
     - Use start/end points for radial-like effect: start={[0,0.5]} end={[1,0.5]}

3. **Button content (resting state):**
   - Text: "Hold to open photos" centered
   - Spinner icon to the left of text (use ActivityIndicator or custom rotating view)
   - Text color: #FFFFFF

4. **Fill animation on press:**
   - Overlay view that fills left-to-right
   - Fill gradient: darker left (#6B21A8) to lighter right (#A855F7)
   - Duration: 1600ms (1.25x faster than current 2000ms)
   - Use Animated.timing with width interpolation

5. **Spinner behavior:**
   - Resting: normal spin speed (use Animated.loop with 2000ms rotation)
   - During hold: 2x faster (1000ms rotation)
   - Implement by adjusting animation duration on press/release

6. **Crescendo haptic feedback:**
   - Replace milestone haptics (25/50/75/100) with gradual intensity:
     - 0-25%: Haptics.ImpactFeedbackStyle.Light every 400ms
     - 25-50%: Haptics.ImpactFeedbackStyle.Light every 300ms
     - 50-75%: Haptics.ImpactFeedbackStyle.Medium every 200ms
     - 75-100%: Haptics.ImpactFeedbackStyle.Heavy every 150ms
   - Use Animated value listener with interval tracking
   - Final completion: Haptics.NotificationFeedbackType.Success (keep existing)

7. **Text during hold:**
   - Change to "Opening..." or show progress percentage
  </action>
  <verify>
    - expo-linear-gradient installed (check package.json)
    - Hold button shows purple gradient
    - Fill animation runs left-to-right with gradient
    - Spinner visible and spins faster during hold
    - Haptic feedback intensifies during hold (test on device)
    - Completion in ~1.6 seconds
  </verify>
  <done>Purple gradient hold button with fill animation, spinner speeds up during hold, haptic crescendo builds intensity, 1.6s completion time</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Redesigned darkroom bottom sheet with dark theme, status indicators, card stack, and neon purple hold-to-reveal interaction</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Take some photos (or have some in queue)
    3. Tap the card stack button to open darkroom bottom sheet
    4. Verify dark theme (no white backgrounds)
    5. Check header: "Darkroom" title, colored status dot, status text
    6. Check card stack on right side (should show fanned cards if multiple photos)
    7. Check hold button: neon purple gradient visible
    8. Press and hold the reveal button:
       - Observe fill animation (left to right, purple gradient)
       - Feel haptic feedback getting stronger (crescendo)
       - Watch spinner spin faster during hold
       - Confirm completion at ~1.6 seconds
    9. Release before completion - verify it resets properly
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Dark theme applied throughout bottom sheet
- [ ] Header shows title + status dot (green/red) + status text
- [ ] Card stack renders in top right with correct fanning
- [ ] Hold button has neon purple gradient background
- [ ] Fill animation works left-to-right with gradient
- [ ] Spinner speeds up during hold
- [ ] Haptic feedback crescendos (intensifies over time)
- [ ] Completion time is ~1.6 seconds (not 2 seconds)
- [ ] App builds without errors: `npx expo start`
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Dark themed bottom sheet matches design vision from CONTEXT.md
- Hold-to-reveal interaction feels premium and satisfying
- No TypeScript/JavaScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/16.1-darkroom-bottom-sheet-ui-overhaul/16.1-01-SUMMARY.md`:

# Phase 16.1 Plan 01: Darkroom Bottom Sheet UI Overhaul Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

[Phase 16.1 complete, ready for Phase 17: Darkroom UX Polish]
</output>
