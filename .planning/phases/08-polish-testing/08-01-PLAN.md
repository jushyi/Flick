---
phase: 08-polish-testing
plan: 01
type: execute
---

<objective>
Clean up uncommitted phone auth code and add error boundaries for crash resilience.

Purpose: Establish stable baseline by committing WIP changes and prevent white-screen crashes with error boundaries.
Output: Clean git state with committed phone auth improvements, ErrorBoundary component wrapping app root.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**From Phase 7 Summary:**
- Phone-only auth system complete
- Legacy auth code removed
- React Native Firebase is sole auth provider

**From CONCERNS.md:**
- Missing error boundaries (white screen on crashes)
- Current workaround: None (app crashes with blank screen)

**Uncommitted changes exist in:**
- src/screens/PhoneInputScreen.js (removed unused Alert import, better comments)
- src/screens/VerificationScreen.js (removed unused imports, simplified resend flow)
- src/services/firebase/phoneAuthService.js (modular API pattern, better error logging)

**Key files:**
@src/screens/PhoneInputScreen.js
@src/screens/VerificationScreen.js
@src/services/firebase/phoneAuthService.js
@App.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Commit phone auth cleanup changes</name>
  <files>src/screens/PhoneInputScreen.js, src/screens/VerificationScreen.js, src/services/firebase/phoneAuthService.js</files>
  <action>
Stage and commit the existing uncommitted changes to phone auth files. These are cleanup improvements from Phase 6:
- PhoneInputScreen: Removed unused Alert import, improved comment, better formatting
- VerificationScreen: Removed unused imports (Alert, sendVerificationCode), removed unused currentConfirmation state, simplified resend flow
- phoneAuthService: Updated to modular API pattern (getAuth, signInWithPhoneNumber), added error codes, improved logging

Commit message: "refactor(08-01): clean up phone auth code from Phase 6"
  </action>
  <verify>git log -1 shows the commit, git status shows no modifications to these files</verify>
  <done>Phone auth cleanup committed with descriptive message</done>
</task>

<task type="auto">
  <name>Task 2: Add ErrorBoundary component and wrap App root</name>
  <files>src/components/ErrorBoundary.js, src/components/index.js, App.js</files>
  <action>
Create ErrorBoundary component that:
1. Catches JavaScript errors in child component tree
2. Logs error to logger utility
3. Shows user-friendly fallback UI (not white screen)
4. Provides "Try Again" button to reset error state

Implementation:
- Create class component (error boundaries require class components)
- Use componentDidCatch for logging, getDerivedStateFromError for state
- Fallback UI: Centered view with error icon, "Something went wrong" message, "Try Again" button
- Style consistent with app design (FAFAFA background, black text)

Wrap entire app in App.js inside NavigationContainer but outside AuthProvider so auth errors are caught.

Do NOT catch auth state listener errors - those should propagate normally.
  </action>
  <verify>
1. ErrorBoundary component exists at src/components/ErrorBoundary.js
2. Component exported from src/components/index.js
3. App.js wraps main content with ErrorBoundary
4. Test: Intentionally throw error in a component to verify fallback UI appears
  </verify>
  <done>ErrorBoundary catches React errors and shows fallback UI instead of white screen</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] git status shows clean working directory (no uncommitted changes to phone auth files)
- [ ] ErrorBoundary component exists and is exported
- [ ] App.js imports and uses ErrorBoundary
- [ ] Manually verify error boundary works (can temporarily add throw new Error() to a screen)
</verification>

<success_criteria>

- Phone auth cleanup committed
- ErrorBoundary component created and integrated
- App no longer shows white screen on React errors
- All verification checks pass
</success_criteria>

<output>
After completion, create `.planning/phases/08-polish-testing/08-01-SUMMARY.md`
</output>
