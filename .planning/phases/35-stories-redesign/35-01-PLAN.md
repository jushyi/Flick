---
phase: 35-stories-redesign
plan: 01
type: execute
domain: react-native
---

<objective>
Redesign FriendStoryCard from circular avatar to Polaroid mini-card with blurred photo thumbnail.

Purpose: Transform stories row to match Phase 34 Polaroid aesthetic and create anticipation with blurred previews.
Output: Redesigned FriendStoryCard component with Polaroid frame, blurred photo thumbnail, and glow states.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/35-stories-redesign/35-CONTEXT.md
@.planning/phases/34-feed-card-redesign/34-01-SUMMARY.md

# Key files to modify:

@src/components/FriendStoryCard.js
@src/constants/colors.js

# Related reference:

@src/components/FeedPhotoCard.js (Polaroid styling reference)
@src/screens/FeedScreen.js (stories row container)

**Tech stack available:**

- expo-linear-gradient for gradient borders
- expo-blur or Image.blurRadius for blur effect
- colors.polaroid tokens from Phase 34
- colors.brand.gradient for purple/pink glow

**Constraining decisions:**

- Phase 34: Polaroid frame uses cream color (#FAF8F5) but feed cards use dark (#2A2A2A) - stories should use dark to blend
- Polaroid proportions: 10px top/sides, 50px bottom for user info

**Design requirements from CONTEXT.md:**

- Thumbnail size: 100-120px to give Polaroid frame room
- Blurred photos in thumbnails (shapes/colors visible, not clear)
- Unviewed: Purple/pink gradient border glow
- Viewed: Subtle gray ring
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Add story card design tokens to colors.js</name>
  <files>src/constants/colors.js</files>
  <action>
Add story card tokens under a new `storyCard` key in colors.js:
- `frame`: '#2A2A2A' (dark gray, matches dark theme)
- `glowUnviewed`: colors.brand.gradient.developing (['#8B5CF6', '#EC4899']) for purple/pink gradient
- `glowViewed`: '#3A3A3A' (subtle gray)
- `textName`: '#FFFFFF'

Keep it minimal - reuse existing polaroid/brand tokens where possible.
</action>
<verify>grep -A 10 "storyCard" src/constants/colors.js shows new tokens</verify>
<done>colors.js has storyCard tokens for frame, glow states, and text</done>
</task>

<task type="auto">
  <name>Task 2: Redesign FriendStoryCard to Polaroid mini-card</name>
  <files>src/components/FriendStoryCard.js</files>
  <action>
Complete redesign of FriendStoryCard:

**Layout structure:**

```
<TouchableOpacity>
  <LinearGradient> (gradient glow border when unviewed)
    <View style={frame}> (dark polaroid frame)
      <Image blurRadius={20}> (blurred photo thumbnail)
    </View>
  </LinearGradient>
  <Text> (display name below)
</TouchableOpacity>
```

**Key changes:**

1. Remove circular avatar styling entirely
2. Card size: 100px width, ~120px height (Polaroid proportions)
3. Frame: 6px padding top/sides, 20px bottom (scaled-down Polaroid proportions)
4. Photo thumbnail uses first photo from friend.topPhotos[0].imageURL
5. Apply blurRadius={20} to Image for blur effect (React Native built-in)
6. Gradient border: LinearGradient wrapper when hasPhotos && !isViewed (default unviewed)
7. Gray border: solid 2px #3A3A3A when isViewed prop is true
8. Display name below card (not inside frame)

**Props:**

- Add `isViewed` prop (boolean, default false)
- Keep existing: friend, onPress, isFirst

**Fallback:** If no topPhotos or imageURL, show initial letter on dark background (existing pattern)

Import expo-linear-gradient: `import { LinearGradient } from 'expo-linear-gradient';`
Import colors: `import { colors } from '../constants/colors';`
</action>
<verify>App renders without errors; stories row shows Polaroid-style cards</verify>
<done>FriendStoryCard displays as mini-Polaroid with blurred photo and gradient/gray border based on isViewed</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Polaroid-style story cards with blurred thumbnails and gradient glow</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Open app on iOS device/simulator
    3. Navigate to Feed tab
    4. Verify stories row shows mini-Polaroid cards (not circular avatars)
    5. Verify photos are blurred (shapes/colors visible, not clear)
    6. Verify purple/pink gradient glow around cards (all unviewed for now)
    7. Verify display name appears below each card
    8. Tap a story card - StoriesViewerModal should still open and work
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] No ESLint errors: npx eslint src/components/FriendStoryCard.js
- [ ] No TypeScript/syntax errors
- [ ] Stories row renders with new Polaroid design
- [ ] Blur effect visible on photo thumbnails
- [ ] Gradient glow visible on cards
- [ ] Existing story viewer still works when tapping cards
</verification>

<success_criteria>

- All tasks completed
- FriendStoryCard displays as mini-Polaroid (not circular avatar)
- Photo thumbnails are blurred
- Purple/pink gradient glow visible on unviewed cards
- Human verification approved
  </success_criteria>

<output>
After completion, create `.planning/phases/35-stories-redesign/35-01-SUMMARY.md`
</output>
