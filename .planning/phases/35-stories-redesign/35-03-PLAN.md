---
phase: 35-stories-redesign
plan: 03
type: execute
domain: react-native
---

<objective>
Filter feed to show only high-engagement "hot highlights" posts.

Purpose: Make stories the primary browsing experience; feed becomes curated highlights only.
Output: Filtered feed showing posts with reactions, updated empty state messaging.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/35-stories-redesign/35-CONTEXT.md
@.planning/phases/35-stories-redesign/35-02-SUMMARY.md

# Key files to modify:

@src/hooks/useFeedPhotos.js
@src/screens/FeedScreen.js

**Design requirements from CONTEXT.md:**

- Feed becomes "hot highlights" only
- Only posts with lots of engagement (comments, reactions) surface
- Stories are now the PRIMARY way to browse all content

**Current state:**

- Feed shows all journaled photos from friends
- Photos have reactionCount field for engagement tracking
- No comments system exists (reactions only)
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Add engagement filter to useFeedPhotos hook</name>
  <files>src/hooks/useFeedPhotos.js</files>
  <action>
Update useFeedPhotos to filter for high-engagement posts:

1. **Add engagement threshold constant at top of file:**

   ```javascript
   const MIN_REACTIONS_FOR_HOT = 2; // Minimum reactions to appear in "hot" feed
   ```

2. **Add filter option to the hook:**
   Modify the hook to accept an optional `hotOnly` parameter:

   ```javascript
   const useFeedPhotos = (realTimeUpdates = false, hotOnly = false) => {
   ```

3. **Apply filter to photos:**
   After fetching/subscribing, filter photos when `hotOnly` is true:

   ```javascript
   // In the photo processing logic (both subscribe and fetch paths)
   let processedPhotos = [...photos];

   if (hotOnly) {
     processedPhotos = processedPhotos.filter(
       photo => (photo.reactionCount || 0) >= MIN_REACTIONS_FOR_HOT
     );
     logger.debug('useFeedPhotos: Filtered to hot photos', {
       total: photos.length,
       hot: processedPhotos.length,
       threshold: MIN_REACTIONS_FOR_HOT,
     });
   }
   ```

4. **Apply filter to refreshFeed and loadMorePhotos as well:**
   Ensure the filter is consistently applied in all code paths.

Note: Keep the existing sorting by capturedAt - the filter just removes low-engagement posts.
</action>
<verify>grep -n "MIN_REACTIONS_FOR_HOT" src/hooks/useFeedPhotos.js shows filter implementation</verify>
<done>useFeedPhotos accepts hotOnly parameter and filters to posts with 2+ reactions</done>
</task>

<task type="auto">
  <name>Task 2: Enable hot filter in FeedScreen and update empty state</name>
  <files>src/screens/FeedScreen.js</files>
  <action>
Update FeedScreen to use the hot filter and improve empty state:

1. **Enable hot filter:**
   Change the useFeedPhotos call to enable hot filtering:

   ```javascript
   const {
     photos,
     loading,
     // ... other destructured values
   } = useFeedPhotos(true, true); // realTimeUpdates=true, hotOnly=true
   ```

2. **Update empty state messaging:**
   Modify `renderEmptyState()` to reflect the new content model:

   ```javascript
   const renderEmptyState = () => {
     if (loading) return null;

     return (
       <View style={styles.emptyContainer}>
         <Text style={styles.emptyIcon}>ðŸ”¥</Text>
         <Text style={styles.emptyTitle}>No hot photos yet</Text>
         <Text style={styles.emptyText}>
           Popular photos from your friends will appear here.{'\n'}
           Tap the stories above to see all their photos!
         </Text>
       </View>
     );
   };
   ```

   Remove the "Take a Photo" button since this is a highlights view.

3. **Optional: Add section header above feed:**
   Add a subtle label between stories and feed:

   ```javascript
   // Above the FlatList, after stories row:
   {
     !loading && !error && (
       <View style={styles.sectionHeader}>
         <Text style={styles.sectionTitle}>ðŸ”¥ Hot</Text>
       </View>
     );
   }
   ```

   Add styles:

   ```javascript
   sectionHeader: {
     paddingHorizontal: 16,
     paddingTop: 16,
     paddingBottom: 8,
   },
   sectionTitle: {
     fontSize: 14,
     fontWeight: '600',
     color: colors.text.secondary,
   },
   ```

     </action>
     <verify>Feed shows only posts with 2+ reactions; empty state shows "No hot photos yet"</verify>
     <done>Feed filtered to hot highlights, empty state updated, optional section header added</done>
   </task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Hot highlights feed filter with updated empty state and stories-first content model</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Open app on iOS device/simulator
    3. Navigate to Feed tab
    4. Verify stories row appears at top (primary browsing)
    5. Verify feed below only shows posts with reactions (2+)
    6. If all posts have 0-1 reactions, verify empty state shows "No hot photos yet"
    7. Verify empty state encourages tapping stories
    8. Tap into a story - verify full viewing experience still works
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] No ESLint errors in modified files
- [ ] Feed only shows posts with 2+ reactions
- [ ] Empty state displays new messaging
- [ ] Stories row still fully functional
- [ ] Human verification approved
</verification>

<success_criteria>

- All tasks completed
- Feed filtered to high-engagement posts only
- Empty state reflects new content model
- Stories remain the primary browsing experience
- Phase 35 complete
  </success_criteria>

<output>
After completion, create `.planning/phases/35-stories-redesign/35-03-SUMMARY.md` with:
- Phase summary noting content model shift
- All files modified across plans 01-03
- Key decisions (threshold value, empty state messaging)
- Note: "Phase 35 complete, ready for Phase 36 (Comments Feature)"
</output>
