# UAT Issues: Phase 17.1 Plan 01

**Tested:** 2026-01-22
**Source:** .planning/phases/17.1-darkroom-animation-refinements/17.1-01-SUMMARY.md
**Tester:** User via /gsd:verify-work

## Open Issues

None.

## Resolved Issues

### UAT-007: White background visible during header swipe (double-screen effect)

**Discovered:** 2026-01-22
**Phase/Plan:** 17.1-01
**Severity:** Major
**Feature:** Header swipe-down-to-close gesture
**Description:** When swiping down on header, there's a white background screen behind the darkroom elements that becomes visible. This makes the swipe look like two separate screens sliding down instead of one cohesive sheet pulling down. Previously was black (UAT-005 fix changed it to transparent, but now shows white from navigation layer).
**Expected:** Single cohesive screen movement during header swipe, no second background visible - should look like a single sheet sliding down
**Actual:** White background layer shows during swipe, creating visible double-screen effect
**Repro:**
1. Open darkroom with photos
2. Place finger on header area
3. Swipe down slowly
4. Observe white background appearing behind the darkroom content

**Resolution:** Removed header swipe-down-to-close feature entirely. The feature was unnecessary since chevron button and Done button already provide adequate close functionality. Removed headerPanGesture, screenTranslateY, screenOpacity, screenAnimatedStyle and related code.
**Fixed in:** 17.1-01-FIX-4 commit e2b8b75
**Verified:** 2026-01-22

### UAT-008: Fast diagonal swipe can accidentally trigger delete

**Discovered:** 2026-01-22
**Phase/Plan:** 17.1-01
**Severity:** Major
**Feature:** Photo triage gestures
**Description:** When performing fast diagonal swipes (down-left or down-right) on photo cards, it can accidentally trigger photo deletion instead of archive/journal. The delete gesture was supposed to be removed entirely to prevent accidental deletions.
**Expected:** No gesture should be able to delete photos - only archive (left) and journal (right) via horizontal swipes
**Actual:** Fast diagonal swipes (particularly down-left or down-right) can trigger deletion
**Repro:**
1. Open darkroom with revealed photos
2. Perform a fast diagonal swipe (down-left or down-right) on a photo card
3. Photo may be deleted instead of archived/journaled

**Resolution:** Added isButtonDelete shared value to track when delete is button-triggered. Delete overlay only shows when isButtonDelete flag is true, never during gesture swipes (even diagonal ones that cause translateY animation).
**Fixed in:** 17.1-01-FIX-4 commit e834c3e
**Verified:** 2026-01-22

### UAT-005: Black background visible during header swipe

**Discovered:** 2026-01-22
**Phase/Plan:** 17.1-01
**Severity:** Minor
**Feature:** Header swipe-down-to-close gesture
**Description:** When swiping down on header, there's a black background screen behind the darkroom elements that becomes visible. This makes the swipe look like two screens swiping down instead of one cohesive sheet.
**Expected:** Single cohesive screen movement during header swipe, no second background visible
**Actual:** Black background layer shows during swipe, making it appear like two separate screens
**Repro:**
1. Open darkroom with photos
2. Swipe down on header area
3. Observe the black background showing behind darkroom content

**Resolution:** Added transparent background to GestureHandlerRootView so inner animated view's background is the only one visible.
**Fixed in:** 17.1-01-FIX-3 commit 417c12f
**Note:** Fix changed black to transparent, but now white shows from navigation layer. See UAT-007.

### UAT-006: Done button closes darkroom in wrong direction

**Discovered:** 2026-01-22
**Phase/Plan:** 17.1-01
**Severity:** Minor
**Feature:** Success state Done button
**Description:** After completing triage and reaching success state, tapping the Done button closes the darkroom but it slides to the right instead of sliding down. This is inconsistent with the rest of the darkroom close animations.
**Expected:** Done button should close darkroom by sliding down (matching chevron button and header swipe behavior)
**Actual:** Done button closes darkroom by sliding to the right
**Repro:**
1. Open darkroom with revealed photos
2. Triage all photos to reach success state
3. Tap the Done button
4. Observe animation direction

**Resolution:** Changed from navigate() to goBack() so React Navigation reverses the original animation (slide_from_bottom -> slide_to_bottom).
**Fixed in:** 17.1-01-FIX-3 commit bc1433f
**Verified:** 2026-01-22

### UAT-004: Header swipe gesture only moves header, not whole screen

**Discovered:** 2026-01-22
**Phase/Plan:** 17.1-01
**Severity:** Minor
**Feature:** Header swipe-down-to-close gesture
**Description:** When swiping down on the header to close the darkroom, only the header element moves with the drag gesture. The photo content and buttons remain stationary. The entire darkroom screen should move together during the swipe gesture, just like the navigation close animation does.
**Expected:** Swiping down on header should move the entire darkroom screen (header + photo + buttons) together, creating a cohesive "pulling down a sheet" effect
**Actual:** Only the header moves during drag; photo and buttons stay fixed in place
**Repro:**
1. Open darkroom with photos
2. Place finger on the header area
3. Drag down slowly
4. Observe that only header follows finger, content stays fixed

**Resolution:** Renamed headerTranslateY to screenTranslateY, combined translateY into screenAnimatedStyle, changed header Views from ReAnimated.View to plain View so gesture triggers from header but entire screen moves.
**Fixed in:** 17.1-01-FIX-2 commit d6b2c62
**Verified:** 2026-01-22

### UAT-001: Empty state flashes before success state

**Discovered:** 2026-01-22
**Phase/Plan:** 17.1-01
**Severity:** Minor
**Feature:** Inline success state
**Description:** When the last photo is triaged, the empty state (camera emoji + text) pops up briefly before jarringly swapping to success state. Creates jarring visual transition.
**Expected:** Smooth transition directly to success state without showing empty state
**Actual:** Empty state flashes briefly, then switches to success state
**Repro:**
1. Open darkroom with revealed photos
2. Triage all photos until only one remains
3. Triage the final photo
4. Observe the brief flash of empty state before success

**Resolution:** Added `pendingSuccess` state that is set BEFORE removing the last photo, ensuring success state renders immediately when photos.length hits 0.
**Fixed in:** 17.1-01-FIX commit 713a9b5
**Verified:** 2026-01-22

### UAT-002: Success state needs visual polish

**Discovered:** 2026-01-22
**Phase/Plan:** 17.1-01
**Severity:** Minor
**Feature:** Inline success state
**Description:** Success state UI needs refinement - remove sparkle animation, add sparkle emojis around text, move done button to bottom with checkmark, add fade-in animation.
**Expected:**
- Remove animated sparkles
- Add sparkle emojis before/after "Hooray!" message (e.g., "✨ Hooray! ✨")
- Move "Done" button to bottom of screen
- Add checkmark icon to Done button
- Fade in the text and button smoothly
**Actual:** Current success state has animated sparkles, no emojis, button not at bottom, no fade-in

**Resolution:** Removed SparkleParticle component, updated text to "✨ Hooray! ✨", moved Done button to bottom with "✓ Done" text, added 350ms fade-in animation.
**Fixed in:** 17.1-01-FIX commit 536ef9e
**Verified:** 2026-01-22

### UAT-003: Add swipe-down-to-close gesture on header

**Discovered:** 2026-01-22
**Phase/Plan:** 17.1-01
**Severity:** Minor
**Feature:** Darkroom navigation
**Description:** User should be able to swipe down on the header area to close darkroom (matching iOS sheet behavior). Only the header should be grabbable for this gesture to avoid interfering with photo triage swipe gestures.
**Expected:** Grabbing header and swiping down closes darkroom with slide-down animation
**Actual:** Header swipe gesture not implemented - can only close via chevron button tap

**Resolution:** Added Gesture.Pan() with GestureDetector wrapping the header. Triggers close on 100px drag or velocity > 500. Screen fades during drag, springs back if threshold not met.
**Fixed in:** 17.1-01-FIX commit 1f55701
**Verified:** 2026-01-22

---

*Phase: 17.1-darkroom-animation-refinements*
*Plan: 01*
*Tested: 2026-01-22*
