---
phase: 53-app-store-release
plan: 04
type: execute
---

<objective>
Verify CI/CD pipeline works end-to-end by pushing a follow-up update, then document the release playbook for future releases.

Purpose: Prove the release process is repeatable and document it so future releases are straightforward. Ensure the CI/CD pipeline from Phase 50 works with App Store distribution.
Output: Pipeline verification update submitted and approved, comprehensive release playbook for future updates.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/53-app-store-release/53-CONTEXT.md
@.planning/phases/53-app-store-release/53-01-SUMMARY.md
@.planning/phases/53-app-store-release/53-02-SUMMARY.md
@.planning/phases/53-app-store-release/53-03-SUMMARY.md
@.planning/phases/50-ci-cd-pipeline/50-03-SUMMARY.md

**From Phase 50:**

- GitHub Actions PR workflow: lint/type-check/test on PR
- EAS Build workflow: triggered by version tags (v\*)
- EAS Submit workflow: manual approval gate
- All configured and tested against preview/staging

**From 53-CONTEXT.md:**

- Pipeline verification is NOT optional - must prove it works before phase is "done"
- Document a walkthrough so future releases are just "follow the steps"
- This proves the release process is repeatable
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Pipeline verification update</name>
  <files>app.json, CHANGELOG.md</files>
  <action>
Create a minimal update to verify the full CI/CD pipeline works with App Store distribution.

**Update preparation:**

1. **Update version in app.json:**
   - Change `"version": "1.0.0"` to `"version": "1.0.1"`
   - This triggers build number auto-increment (already configured in eas.json)

2. **Create CHANGELOG.md entry:**

   ```markdown
   # Changelog

   ## [1.0.1] - [Date]

   ### Fixed

   - Pipeline verification update - confirms CI/CD works end-to-end
   ```

3. **Commit and tag:**

   ```bash
   git add app.json CHANGELOG.md
   git commit -m "chore: bump version to 1.0.1 for pipeline verification"
   git tag v1.0.1
   git push origin main
   git push origin v1.0.1
   ```

4. **Verify GitHub Actions triggers:**
   - Go to GitHub Actions tab
   - Confirm EAS Build workflow started (triggered by v1.0.1 tag)
   - Monitor build progress

5. **Wait for build completion:**
   - Build runs automatically via GitHub Actions + EAS Build
   - Should complete in 15-25 minutes
   - Check GitHub Actions logs for any failures

6. **Submit via workflow (manual approval):**
   - Per Phase 50 design, EAS Submit requires manual approval
   - Go to GitHub Actions â†’ Find the workflow run
   - Approve the submit step (if workflow designed with approval gate)
   - OR manually run: `eas submit --platform ios --latest` if workflow doesn't include submit

7. **Fast-track App Review:**
   - In App Store Connect, submit 1.0.1 for review
   - In "What's New in This Version": "Minor update - pipeline verification"
   - App Review is typically faster for updates from known developers (often < 24 hours)

8. **Publish when approved:**
   - Use "Automatically release" this time (instead of manual like v1.0.0)
   - Or manually release when status changes to "Pending Developer Release"

**What to avoid:**

- Don't add new features - this is purely a pipeline test (minimal change)
- Don't skip the tag push - tags trigger the GitHub Actions workflow
- Don't bypass the pipeline by building manually - the point is to verify automation works
- Don't wait indefinitely for App Review - if it takes >3 days, document and move to Task 2

This task proves:

- GitHub Actions workflow triggers on version tags âœ“
- EAS Build runs via GitHub Actions âœ“
- Build artifacts are produced âœ“
- Submission process works âœ“
- App Review accepts updates âœ“
  </action>
  <verify>Version 1.0.1 tagged and pushed. GitHub Actions workflow completed successfully. Build submitted to App Store Connect. App Review approved (or in progress - can proceed to Task 2 while waiting).</verify>
  <done>Pipeline verification update submitted through full CI/CD flow. Proves release process is repeatable and automated.</done>
  </task>

<task type="auto">
  <name>Task 2: Document release playbook</name>
  <files>.planning/phases/53-app-store-release/RELEASE-PLAYBOOK.md</files>
  <action>
Create a comprehensive release playbook documenting the step-by-step process for future App Store releases.

**Playbook structure:**

````markdown
# Flick App Store Release Playbook

Last updated: [Date]
Last release: v1.0.1 on [Date]

## Overview

This playbook covers releasing Flick updates to the App Store using our automated CI/CD pipeline (EAS Build + GitHub Actions).

## Prerequisites

- [ ] Code changes committed and merged to `main`
- [ ] All tests passing (`npm test`)
- [ ] Manual testing completed (Phase 52 UAT process)
- [ ] CHANGELOG.md updated with changes

## Release Process

### Step 1: Version Bump

**When to bump major/minor/patch:**

- **Major (2.0.0):** Breaking changes, major redesigns
- **Minor (1.1.0):** New features, enhancements
- **Patch (1.0.1):** Bug fixes, minor tweaks

**Execute:**

```bash
# Update version in app.json
# Current: "version": "1.0.0"
# New: "version": "1.0.1" (or appropriate version)

# Update CHANGELOG.md with release notes
```
````

### Step 2: Tag and Push

```bash
git add app.json CHANGELOG.md
git commit -m "chore: bump version to 1.0.1"
git tag v1.0.1
git push origin main
git push origin v1.0.1
```

**What happens:**

- GitHub Actions workflow triggers on `v*` tag
- EAS Build runs automatically (15-25 min)
- Build artifact (.ipa) produced
- Notifications sent when build completes

### Step 3: Submit to App Store Connect

**Option A: Via GitHub Actions (if workflow includes submit step)**

- Go to GitHub Actions
- Find the workflow run
- Approve the submit step (manual approval gate)

**Option B: Manual EAS Submit**

```bash
eas submit --platform ios --latest
```

**What happens:**

- .ipa uploaded to App Store Connect
- Build processes on TestFlight (10-15 min)
- Build becomes available under "Builds" section

### Step 4: Submit for App Review

1. **Go to App Store Connect** â†’ Flick â†’ App Store
2. **Create new version:**
   - Click "+" next to iOS App
   - Enter version number (must match app.json)
3. **Add What's New:**
   - Copy from CHANGELOG.md
   - Focus on user-facing changes (not technical details)
4. **Select build:**
   - Choose the build uploaded in Step 3
5. **Submit for Review**

**App Review timeline:**

- Initial release: 24-48 hours
- Updates: Often < 24 hours
- You'll receive email when status changes

### Step 5: Publish

**When approved (status: Pending Developer Release):**

- Click "Release this Version"
- App goes live within 1-2 hours

**Or use automatic release:**

- Set "Automatically release this version after approval" during submission

### Step 6: Post-Release

- [ ] Verify app updates on the App Store
- [ ] Test update on device via App Store download
- [ ] Share update with users (if needed)
- [ ] Monitor Crashlytics/error logs (if enabled)

## Troubleshooting

### Build Fails on GitHub Actions

**Check:**

- GitHub Actions logs for error details
- Secrets are set correctly (EXPO_TOKEN)
- Dependencies install without errors
- `npx expo export` works locally

**Common fixes:**

- Update node_modules: `npm install`
- Clear EAS cache: `eas build --platform ios --profile production --clear-cache`

### App Review Rejection

**Common reasons and fixes:**

1. **Demo Account Issue**
   - Ensure test account works (try signing in yourself)
   - Update credentials in App Store Connect â†’ App Review Information

2. **Privacy Declaration Missing**
   - Check App Privacy section is complete
   - Verify privacy manifest in app.json matches actual data collection

3. **Guideline Violation**
   - Read rejection reason carefully
   - Address specific concern (often UX or content policy)
   - Respond in Resolution Center if clarification needed

4. **Crash on Launch**
   - Test build via TestFlight before submitting for review
   - Check Firebase config is correct for production

**After fixing:**

- If code change: Repeat from Step 1 (new version)
- If metadata only: Update in App Store Connect, resubmit

### Submit Fails

**EAS Submit errors:**

- Verify `ascAppId` in eas.json is correct (10-digit Apple ID)
- Check Apple Developer account status is active
- Ensure build is from production profile

## Quick Reference

**Key URLs:**

- App Store Connect: https://appstoreconnect.apple.com
- GitHub Actions: https://github.com/[org]/[repo]/actions
- EAS Dashboard: https://expo.dev/accounts/[account]/projects/flick

**Key Commands:**

```bash
# Build locally (testing)
npx expo export

# Build via EAS
eas build --platform ios --profile production

# Submit to App Store
eas submit --platform ios --latest

# Check build status
eas build:list
```

**Version History:**

- v1.0.0: Initial release ([Date])
- v1.0.1: Pipeline verification ([Date])

## Notes

- **Build numbers auto-increment:** Managed by EAS (`autoIncrement: true`)
- **Manual vs Automatic release:** Personal preference, both work
- **TestFlight testing:** Optional for minor updates, recommended for major releases
- **App Review frequency:** Faster for known developers, slower for new features

```

**Customize based on actual Phase 50 CI/CD implementation:**
- If GitHub Actions doesn't include submit step, document manual submit
- If webhook notifications are set up, mention them
- If Slack/Discord notifications exist, include links

**What to avoid:**
- Don't write generic "best practices" - document OUR specific process
- Don't skip troubleshooting section - include real issues encountered in Phase 53
- Don't make assumptions - if something requires manual action, state it explicitly
  </action>
  <verify>RELEASE-PLAYBOOK.md created with 6 main steps (version bump, tag, submit, review, publish, post-release), troubleshooting section, quick reference</verify>
  <done>Release playbook documented. Future releases can follow this walkthrough. Playbook includes actual commands, URLs, and troubleshooting based on Phase 53 experience.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Version 1.0.1 submitted through full CI/CD pipeline
- [ ] GitHub Actions workflow successfully triggered and completed
- [ ] App Review approved (or in progress with clear next steps)
- [ ] RELEASE-PLAYBOOK.md created and comprehensive
- [ ] Playbook tested by walking through it mentally
</verification>

<success_criteria>

- Pipeline verification update pushed through full automation
- GitHub Actions + EAS Build + EAS Submit workflow proven
- App Review process completed for update
- Release playbook documented with step-by-step instructions
- Phase 53 complete - Flick is live on App Store with repeatable release process
  </success_criteria>

<output>
After completion, create `.planning/phases/53-app-store-release/53-04-SUMMARY.md`:

# Phase 53-04: Post-Release Pipeline Verification Summary

**CI/CD pipeline verified end-to-end, release playbook documented**

## Accomplishments

- Pipeline verification update (v1.0.1) submitted via GitHub Actions + EAS
- Full CI/CD workflow proven: tag â†’ build â†’ submit â†’ review â†’ publish
- Release playbook created with step-by-step instructions
- Future releases are now a documented, repeatable process

## Files Created/Modified

- `app.json` - Version bumped to 1.0.1
- `CHANGELOG.md` - Pipeline verification entry
- `.planning/phases/53-app-store-release/RELEASE-PLAYBOOK.md` - Release guide

## Decisions Made

None - followed established CI/CD process from Phase 50

## Issues Encountered

[Any GitHub Actions or App Review issues, or "None"]

## Pipeline Verification Results

- GitHub Actions trigger: âœ…
- EAS Build via workflow: âœ…
- EAS Submit: âœ…
- App Review (update): [Status - approved/in progress]
- Total time: [X hours for full pipeline]

## Release Playbook

Complete walkthrough documented in RELEASE-PLAYBOOK.md covering:
- Version bumping
- Tag-based deployment
- App Review submission
- Troubleshooting common issues
- Quick reference commands

## Phase 53 Complete

**Flick is live on the App Store:**
- Version: 1.0.0 (initial release) + 1.0.1 (pipeline verification)
- App Store URL: [URL from Plan 3]
- Release process: Documented and repeatable
- CI/CD pipeline: Verified working end-to-end

**Next:** Share App Store link with friends and family ðŸŽ‰
</output>
```
