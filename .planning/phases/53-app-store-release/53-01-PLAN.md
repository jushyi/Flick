---
phase: 53-app-store-release
plan: 01
type: execute
---

<objective>
Perform pre-flight audit and App Review pre-check to catch any breaking changes or misconfigurations before submission.

Purpose: Verify production environment setup, App Store requirements, and dependencies are correct. Minimize risk of submission failure or App Review rejection.
Output: Pre-flight audit report confirming readiness, App Review checklist against common rejection reasons.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/53-app-store-release/53-CONTEXT.md
@.planning/phases/51-ios-release-preparation/51-RESEARCH.md

**Recent changes since Phase 52:**

- Phase 51 completed rebrand to Flick, production Firebase setup, IAP integration, name color feature
- New packages may have been installed (expo-store-review for IAP, etc.)
- Configuration changes in app.json and eas.json

**Key context:**

- Bundle ID: com.spoodsjs.flick
- App name: Flick
- APS environment: already set to "production" in app.json
- Privacy manifest: already configured in app.json
- First-time App Store submitter - belt-and-suspenders approach needed
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Pre-flight audit checklist</name>
  <files>app.json, eas.json, package.json, GoogleService-Info-prod.plist, .env.example</files>
  <action>
Verify three critical areas before submission:

**1. Production Environment Setup:**

- Firebase production project: Verify GoogleService-Info-prod.plist exists and has correct project ID
- Environment variables: Check .env.example documents all required keys (no secrets in git)
- OAuth credentials: Verify CFBundleURLSchemes in app.json matches production Firebase OAuth client ID (from Phase 51-04)
- API keys: Confirm Giphy production key is requested/approved (Phase 51-06 notes it's pending)

**2. App Store Requirements:**

- Bundle ID: Verify app.json has `com.spoodsjs.flick` (not old `com.spoodsjs.rewind`)
- APS environment: Confirm `"aps-environment": "production"` in app.json
- Privacy manifests: Verify NSPrivacyAccessedAPITypes array has all required entries (FileTimestamp, UserDefaults, SystemBootTime, DiskSpace)
- ITSAppUsesNonExemptEncryption: Confirm set to `false` in infoPlist
- supportsTablet: Confirm set to `false` (phone-only, per Phase 51 decision)
- Version: Confirm version is "1.0.0" in app.json

**3. Dependencies & Build Verification:**

- Run `npm install` to ensure all dependencies resolve
- Run `npm run lint` - expect 0 errors (pre-existing warnings OK)
- Check `node_modules` for any new packages since Phase 51 that might have privacy manifest requirements: `find node_modules -name "PrivacyInfo.xcprivacy" | head -20`
- Verify no breaking dependency conflicts: `npm ls` should show no UNMET PEER DEPENDENCY errors
- Test production build config: `npx expo export` (doesn't consume EAS credits, just validates JS bundle compiles - pattern from Phase 50)

**What to avoid:**

- Don't skip the privacy manifest check - new packages may require additional NSPrivacyAccessedAPITypes entries
- Don't assume Giphy production key is approved - verify status or note if still pending (can launch with dev key but should document)
- Don't run full EAS build yet (that's Plan 3) - this is config verification only

Document findings in checklist format with ✅ for pass, ⚠️ for warnings, ❌ for blockers.
</action>
<verify>All critical checks pass (production Firebase config exists, bundle ID correct, privacy manifests complete, dependencies resolve, build exports successfully)</verify>
<done>Pre-flight audit report created with no blockers (❌). Warnings (⚠️) documented with notes. Ready to proceed with App Store Connect setup.</done>
</task>

<task type="auto">
  <name>Task 2: App Review guidelines pre-check</name>
  <files>.planning/phases/53-app-store-release/app-review-checklist.md</files>
  <action>
Create a pre-submission checklist based on Apple's most common App Review rejection reasons. Cover these categories:

**1. Safety (Guideline 1)**

- [ ] No objectionable content (app is a private photo sharing app, content is user-generated and private)
- [ ] User-generated content has reporting mechanism (verify reportService exists and routes to email from Phase 51-05)
- [ ] Privacy policy URL exists and is accessible (verify flickcam.app/privacy from Phase 51-04)

**2. Performance (Guideline 2)**

- [ ] App doesn't crash on launch
- [ ] Core features work without signing in (N/A - auth required by design)
- [ ] No placeholder content or unfinished features
- [ ] App uses native iOS UI patterns (React Native is native)

**3. Business (Guideline 3)**

- [ ] In-app purchase uses StoreKit (verify Phase 51-07 used expo-store-review which wraps StoreKit)
- [ ] IAP price tiers are set in App Store Connect (will be done in Plan 2)
- [ ] App doesn't use alternate payment methods outside IAP (confirm no external payment links)

**4. Design (Guideline 4)**

- [ ] App works on iPhone only (supportsTablet: false)
- [ ] No references to other platforms (no "Download on Android" messaging)
- [ ] App icon follows guidelines (120x120, 180x180 sizes exist in assets/)

**5. Legal (Guideline 5)**

- [ ] Privacy policy accessible (flickcam.app/privacy)
- [ ] Terms of service accessible (flickcam.app/terms from Phase 51-04)
- [ ] Data collection declared accurately in App Privacy section (Firebase Auth phone numbers, Firestore device IDs, Performance monitoring IPs - per 51-RESEARCH.md Firebase data collection checklist)

**6. Firebase & Push Notifications**

- [ ] Firebase services declared in privacy (Phone Auth, Firestore, Storage, Performance Monitoring)
- [ ] Push notifications use APNs (not third-party, expo-notifications wraps APNs)
- [ ] Remote notifications background mode enabled (UIBackgroundModes in infoPlist)

**7. Common Rejection Reasons (from 51-RESEARCH.md pitfalls)**

- [ ] Privacy manifest complete (no missing API declarations)
- [ ] EU trader status will be set (required in App Store Connect)
- [ ] APS environment is production (already verified in Task 1)
- [ ] No iPad rendering issues (supportsTablet: false avoids this)

**What to avoid:**

- Don't just copy generic checklists - tailor to Flick's specific features (photo sharing, Firebase, IAP)
- Don't skip Firebase data collection declarations - this is a common rejection reason per Phase 51 research
- Don't assume email-based reporting is sufficient - verify the implementation from Phase 51-05 actually works

Save as app-review-checklist.md in phase directory. Use checkbox format for easy tracking during actual submission.
</action>
<verify>Checklist created covering all 7 categories. Each item references Flick-specific features or configurations. No generic placeholders.</verify>
<done>app-review-checklist.md created with ~20-25 items. All items are checkable and specific to Flick's architecture. Ready to reference during submission.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Pre-flight audit report shows no blockers (❌)
- [ ] App Review checklist has 20-25 specific items
- [ ] Any warnings (⚠️) from audit are documented with mitigation notes
- [ ] Both outputs are committed to git
</verification>

<success_criteria>

- Pre-flight audit completed with no blocking issues
- App Review checklist created and tailored to Flick
- Any warnings documented and understood
- Ready to proceed with App Store Connect setup in Plan 2
  </success_criteria>

<output>
After completion, create `.planning/phases/53-app-store-release/53-01-SUMMARY.md`:

# Phase 53-01: Pre-Flight Audit & App Review Pre-Check Summary

**Pre-flight audit completed with environment, requirements, and dependencies verified**

## Accomplishments

- Pre-flight audit covering production environment, App Store requirements, dependencies
- App Review guidelines checklist created (20-25 items)
- [Any warnings or pending items documented]

## Files Created/Modified

- `.planning/phases/53-app-store-release/pre-flight-audit.md` - Audit report
- `.planning/phases/53-app-store-release/app-review-checklist.md` - Review checklist

## Decisions Made

[Any configuration changes needed, or "None - all configs verified as correct"]

## Issues Encountered

[Blockers found and resolved, or "None"]

## Next Step

Ready for 53-02-PLAN.md - App Store Connect Setup
</output>
