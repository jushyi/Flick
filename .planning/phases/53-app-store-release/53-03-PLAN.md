---
phase: 53-app-store-release
plan: 03
type: execute
---

<objective>
Build production .ipa via EAS Build, submit to App Store Connect, monitor App Review, and publish publicly.

Purpose: Execute the actual submission to Apple, handle App Review process, and make Flick publicly available on the App Store.
Output: Approved App Store listing, Flick published and discoverable on the App Store.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/53-app-store-release/53-CONTEXT.md
@.planning/phases/51-ios-release-preparation/51-RESEARCH.md
@.planning/phases/53-app-store-release/53-01-SUMMARY.md
@.planning/phases/53-app-store-release/53-02-SUMMARY.md
@.planning/phases/53-app-store-release/app-review-checklist.md

**From Phase 51 research:**

- EAS managed credentials handle distribution certificate, provisioning profile, APNs key automatically
- First `eas build` prompts for Apple Developer account login
- `eas submit` uploads .ipa to App Store Connect using ascAppId from eas.json
- App Review typically takes 24-48 hours but can be faster or slower

**From 53-CONTEXT.md:**

- First-time App Store submitter, belt-and-suspenders approach
- Ready to iterate quickly if rejection occurs
- Public release (not unlisted), no marketing push
- App Store link shared directly with friends/family
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Production build via EAS Build</name>
  <files>None</files>
  <action>
Build the production .ipa using EAS Build with the production profile.

**Pre-build verification:**
Before starting the build, verify eas.json production profile configuration:

```bash
cat eas.json | grep -A 15 "production"
```

Expected to see:

- `autoIncrement: true` (build number auto-increments)
- `APP_ENV: "production"` (for Firebase environment switching)
- `GOOGLE_SERVICES_PLIST: "./GoogleService-Info-prod.plist"` (production Firebase)
- `ascAppId` set to actual Apple ID (from Plan 2)

**Execute production build:**

```bash
eas build --platform ios --profile production
```

**First-time credential setup (if prompted):**

- EAS will prompt for Apple Developer account login
- Follow the interactive prompts to authenticate
- EAS generates: Distribution Certificate, Provisioning Profile, APNs Push Key
- Credentials are stored on EAS servers and reused for future builds

**Monitor build:**

- Build runs on EAS servers (not local)
- View progress: `eas build:list` or check Expo dashboard
- Build typically takes 15-25 minutes
- Build produces: .ipa file (download URL provided)

**Expected output:**

```
✔ Build successful!

Build ID: [uuid]
Build URL: https://expo.dev/accounts/[account]/projects/flick/builds/[id]
Download: https://expo.dev/artifacts/[id]
```

**What to avoid:**

- Don't run with `--local` flag (use EAS cloud builders)
- Don't skip build if credentials prompt appears - follow the setup flow
- Don't proceed to Task 2 if build fails - debug first (check logs in Expo dashboard)
- Don't manually upload .ipa (Task 2 automates this with `eas submit`)

Save the Build ID and download URL for reference in the summary.
</action>
<verify>eas build completes successfully. Build URL and download link are available. Check build logs show no errors.</verify>
<done>Production .ipa built successfully on EAS. Build artifact is ready for submission to App Store Connect.</done>
</task>

<task type="auto">
  <name>Task 2: Submit to App Store Connect via EAS Submit</name>
  <files>None</files>
  <action>
Submit the production build to App Store Connect using EAS Submit.

**Execute submission:**

```bash
eas submit --platform ios --latest
```

The `--latest` flag automatically uses the most recent production build (from Task 1).

**Alternatively, submit specific build:**

```bash
eas submit --platform ios --id [BUILD_ID]
```

Where BUILD_ID is from Task 1.

**EAS Submit process:**

1. Authenticates with Apple using App Store Connect API key (managed by EAS)
2. Reads ascAppId from eas.json (`submit.production.ios.ascAppId`)
3. Downloads the .ipa from EAS Build
4. Uploads to App Store Connect
5. Associates with the app listing created in Plan 2

**Expected output:**

```
✔ Uploaded to App Store Connect!

The build is now processing on App Store Connect.
Check status: https://appstoreconnect.apple.com/apps/[ascAppId]/appstore

TestFlight processing typically takes 10-15 minutes.
App Review submission available after processing completes.
```

**What to avoid:**

- Don't use Xcode or Transporter for upload (EAS Submit is simpler)
- Don't submit if ascAppId in eas.json is still "PLACEHOLDER" (should have been updated in Plan 2)
- Don't skip waiting for "Processing" status - Apple needs to process the build first

**After upload:**
Monitor TestFlight processing status. The build must finish processing before it can be submitted for App Review. Check App Store Connect for:

- Build appears under TestFlight → Builds
- Status changes from "Processing" to "Ready to Submit"
- Any privacy manifest or API usage warnings (should be none if Plan 1 audit passed)

Document the build number (e.g., "1.0.0 (1)") and upload timestamp for the summary.
</action>
<verify>EAS Submit completes successfully. App Store Connect shows the build under TestFlight. Build status is "Processing" or "Ready to Submit".</verify>
<done>Build uploaded to App Store Connect and visible in TestFlight section. Ready for App Review submission.</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Submit for App Review, monitor review process, and publish when approved</action>
  <instructions>
**Part 1: Submit for App Review**

After the build finishes TestFlight processing (status: "Ready to Submit"):

1. **Go to App Store Connect** → Your App → App Store tab
2. **Under "1.0 Prepare for Submission"**, verify all sections complete:
   - ✅ Screenshots uploaded
   - ✅ Description filled
   - ✅ Keywords set
   - ✅ Support URL set
   - ✅ App Privacy configured
   - ✅ Age rating set
   - ✅ App Review information provided (demo account, notes)
3. **Select Build:**
   - Click "+ Build" next to "Build"
   - Select the build uploaded in Task 2 (should be version 1.0.0 (1))
   - If prompted about Export Compliance (encryption), select "No" (ITSAppUsesNonExemptEncryption: false)
4. **Review app-review-checklist.md** (from Plan 1) one final time
   - Ensure all items are checked
   - Verify demo account credentials work
5. **Click "Submit for Review"**
6. **Note the submission timestamp**

**Part 2: Monitor App Review**

App Review typically takes 24-48 hours but can be faster or slower.

**You'll receive emails from Apple:**

- "In Review" - Apple started reviewing
- "Pending Developer Release" (approval) - GOOD
- "Rejected" / "Metadata Rejected" (rejection) - needs fixes

**If approved (Pending Developer Release):**

- Proceed to Part 3

**If rejected:**

- Read rejection reason carefully
- Common issues and fixes:
  - Missing/incorrect demo account → Provide working credentials
  - Privacy declaration incomplete → Update App Privacy in ASC
  - Guideline violation → Address specific concern
- Fix the issue
- If code changes needed: Run Plan 3 Tasks 1-2 again (new build + submit)
- If metadata only: Update in App Store Connect and resubmit
- Reply with rejection details so I can help debug

**Part 3: Publish Publicly**

Once status is "Pending Developer Release":

1. Go to App Store Connect → Version 1.0
2. Click "Release this Version"
3. App goes live on the App Store within a few hours
4. Find your app by searching "Flick" on App Store (or direct link)
5. Copy the App Store link for sharing

**Expected App Store URL format:**

```
https://apps.apple.com/us/app/flick/id[APPLE_ID]
```

When the app is live on the App Store, reply with:

- "published" + the App Store link

If rejection occurs, reply with:

- "rejected: [paste rejection reason]"
  </instructions>
  <verification>I cannot programmatically verify App Store approval, but I can confirm the process was followed correctly once you report the outcome</verification>
  <resume-signal>Type "published [App Store URL]" when live, or "rejected: [reason]" if rejected</resume-signal>
  </task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] EAS Build completed successfully
- [ ] EAS Submit uploaded to App Store Connect
- [ ] Build processed by TestFlight
- [ ] App submitted for App Review
- [ ] App Review completed (approved or rejection addressed)
- [ ] App published publicly on App Store
- [ ] App Store link obtained and shareable
</verification>

<success_criteria>

- Production .ipa built via EAS Build
- Build submitted to App Store Connect via EAS Submit
- App Review process completed (approved on first try or rejection addressed)
- Flick published publicly on App Store
- App Store link available for sharing with friends/family
- Ready for post-release pipeline verification in Plan 4
  </success_criteria>

<output>
After completion, create `.planning/phases/53-app-store-release/53-03-SUMMARY.md`:

# Phase 53-03: Build, Submit & App Review Summary

**Flick built, submitted, and published on the App Store**

## Accomplishments

- Production build via EAS Build (Build ID: [id])
- Submitted to App Store Connect via EAS Submit
- [App Review outcome: Approved on first try / Approved after addressing [issue]]
- Published publicly on App Store
- App Store link: [URL]

## Files Created/Modified

None (all operations via EAS CLI and App Store Connect)

## Decisions Made

[If any changes needed during App Review, or "None - approved as submitted"]

## Issues Encountered

[App Review rejections and resolutions, or "None - approved on first submission"]

## App Review Timeline

- Submitted: [date/time]
- In Review: [date/time]
- Resolution: [date/time]
- Published: [date/time]
- Total time: [X hours/days]

## App Store Details

- App Name: Flick
- Version: 1.0.0
- Build Number: [build number]
- Bundle ID: com.spoodsjs.flick
- App Store URL: [URL]

## Next Step

Ready for 53-04-PLAN.md - Post-Release Pipeline Verification
</output>
