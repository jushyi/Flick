# Phase 50.1: Fix Failing Test Suites - Context

**Gathered:** 2026-02-12
**Status:** Ready for planning

<vision>
## How This Should Work

Straightforward fix pass — 76 tests are failing across 10 suites because of mock setup issues, not real bugs. Go through each failing suite, fix the mock configuration so the tests pass, and move on. No creativity needed, just methodical debugging of mock mismatches.

When done, `npm test` runs clean and the CI PR checks pipeline is green.

</vision>

<essential>
## What Must Be Nailed

- **All 76 failing tests pass** — every single one, no skipping or disabling tests
- **CI pipeline green** — PR checks must pass end-to-end with all tests included

</essential>

<boundaries>
## What's Out of Scope

- No new tests — only fix existing failing tests, don't write additional coverage
- No test refactoring — don't restructure test files or change test patterns
- Minimal diffs — strictly fix failures, nothing more

</boundaries>

<specifics>
## Specific Ideas

No specific requirements — just fix the mock setup issues in each suite:

- 3 service tests (feedService, friendshipService, photoService)
- 2 integration tests (friendshipFlow, photoLifecycle)
- 5 cloud functions tests (callable, notifications/sender, scheduled, smoke, triggers/notifications)

</specifics>

<notes>
## Additional Context

All failures are confirmed mock setup issues, not real application bugs. The test suite was built in Phase 49 and the CI pipeline in Phase 50 — this phase bridges the gap so the pipeline is actually green before release.

</notes>

---

_Phase: 50.1-fix-failing-test-suites_
_Context gathered: 2026-02-12_
