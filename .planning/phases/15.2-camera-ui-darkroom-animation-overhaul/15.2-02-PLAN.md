---
phase: 15.2-camera-ui-darkroom-animation-overhaul
plan: 02
type: execute
---

<objective>
Redesign darkroom button as a card stack with fanning animation.

Purpose: Replace the current moon icon with badge to a more visual card-based design. The button should look like a stack of photo cards that fans out based on photo count, making the pending photos feel tangible and inviting to interact with.

Output: New DarkroomCardButton component with card stack fanning animation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15.2-camera-ui-darkroom-animation-overhaul/15.2-01-PLAN.md

**Key Files:**
@src/screens/CameraScreen.js - Contains current DarkroomButton component

**Prior Context:**
- Plan 01 removed the debug button and redesigned capture button
- Darkroom button is positioned left of capture in footer controls
- Current button is 56px circular with moon icon and badge overlay

**Design Spec:**
- Card button ~75% of capture button size (if capture is 88px, card is ~66px)
- Number displayed within card (not badge overlay)
- Card fanning: 1 photo = 1 card, 2 = 2 fanned, 3 = 3 fanned, 4+ = 4 cards fanned
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DarkroomCardButton component with single card design</name>
  <files>src/screens/CameraScreen.js</files>
  <action>
1. Replace existing DarkroomButton component with new DarkroomCardButton
2. Base card design:
   - Size: ~66px width, ~88px height (4:3 aspect ratio like a photo)
   - Rounded corners (8px border radius)
   - Dark grey background (#2A2A2A) with subtle white border (1px)
   - Number displayed centered in card (bold, 16-20px font)
   - Number color: white
3. Remove the moon SVG icon entirely
4. Keep the same onPress behavior (opens bottom sheet)
5. Keep disabled state (opacity 0.4) when count is 0
6. Position the card button in the footer controls where DarkroomButton was

Card styling should feel like a polaroid/instant camera photo thumbnail.

Avoid: Don't implement fanning animation yet (Task 2). Focus on single card appearance first.
  </action>
  <verify>App runs, darkroom button appears as a single card with number inside, tapping opens bottom sheet</verify>
  <done>DarkroomCardButton renders as photo card with centered count, onPress works</done>
</task>

<task type="auto">
  <name>Task 2: Implement card fanning animation based on photo count</name>
  <files>src/screens/CameraScreen.js</files>
  <action>
1. Modify DarkroomCardButton to render multiple stacked cards based on count:
   - 0 photos: single card (greyed out, no number)
   - 1 photo: single card with "1"
   - 2 photos: 2 cards fanned (bottom card rotated -5deg, offset left 4px)
   - 3 photos: 3 cards fanned (bottom -10deg offset 8px, middle -5deg offset 4px, top straight)
   - 4+ photos: 4 cards fanned (similar progressive rotation/offset), number shows actual count

2. Card stacking order: use zIndex or render order so top card (with number) is always on top
3. Each card should be slightly visible behind the one above it
4. Rotation pivots from bottom-center of card for natural fan effect
5. Use transform array: [{ rotate: 'Xdeg' }, { translateX: Ypx }]

6. Keep bounce animation capability (bounceAnim prop) for capture feedback (Plan 03)

Card fanning creates a visual stack effect that makes the button feel like it contains actual photos waiting to be revealed.

Avoid: Don't add complex spring animations for fanning. Static positions based on count are sufficient. The bounce animation is separate (Plan 03).
  </action>
  <verify>App runs, cards fan out correctly based on count (0-4+ scenarios), number always visible on top card</verify>
  <done>Card stack fans based on count: 1 card, 2 fanned, 3 fanned, 4+ fanned with count</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Darkroom card stack button with fanning animation</what-built>
  <how-to-verify>
    1. Run: npx expo start (or the dev server already running)
    2. Open app on device/simulator
    3. Navigate to Camera tab
    4. Observe darkroom button appearance:
       - Should look like a photo card (not moon icon)
       - If 0 photos: single greyed card
       - Take 1-4+ photos and observe fanning effect
       - Number should be displayed inside the top card
    5. Tap the card button - should open darkroom bottom sheet
    6. Confirm visual design feels polished and photo-like
  </how-to-verify>
  <resume-signal>Type "approved" if card stack looks good, or describe visual issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Moon icon replaced with card design
- [ ] Card size is approximately 66x88px (photo aspect ratio)
- [ ] Number displayed inside card, not as badge overlay
- [ ] Cards fan correctly for counts 1, 2, 3, 4+
- [ ] 0 photos shows single greyed card
- [ ] Top card always shows count (for 4+)
- [ ] Tapping card opens bottom sheet
- [ ] Human verification approved
</verification>

<success_criteria>

- DarkroomCardButton component renders as photo card stack
- Fanning animation works correctly for all count scenarios
- Visual design approved by user
- No regression in darkroom access functionality
</success_criteria>

<output>
After completion, create `.planning/phases/15.2-camera-ui-darkroom-animation-overhaul/15.2-02-SUMMARY.md`
</output>
